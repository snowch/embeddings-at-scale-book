<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 720 520">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#444"/>
    </marker>
  </defs>

  <!-- Classification Workflow -->
  <rect x="20" y="15" width="680" height="70" rx="8" fill="#fee2e2" stroke="#dc2626" stroke-width="2"/>
  <text x="35" y="38" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#991b1b">Classification Workflow</text>

  <rect x="50" y="48" width="70" height="28" rx="4" fill="#fff" stroke="#666"/>
  <text x="85" y="67" font-family="system-ui, sans-serif" font-size="11" text-anchor="middle">Query</text>

  <line x1="120" y1="62" x2="175" y2="62" stroke="#444" stroke-width="1.5" marker-end="url(#arrow)"/>

  <rect x="177" y="48" width="150" height="28" rx="4" fill="#fff" stroke="#666"/>
  <text x="252" y="67" font-family="system-ui, sans-serif" font-size="11" text-anchor="middle">Neural Network (every query)</text>

  <line x1="327" y1="62" x2="382" y2="62" stroke="#444" stroke-width="1.5" marker-end="url(#arrow)"/>

  <rect x="384" y="48" width="70" height="28" rx="4" fill="#fff" stroke="#666"/>
  <text x="419" y="67" font-family="system-ui, sans-serif" font-size="11" text-anchor="middle">Decision</text>

  <!-- Embedding Workflow -->
  <rect x="20" y="105" width="680" height="400" rx="8" fill="#f8fafc" stroke="#64748b" stroke-width="2"/>
  <text x="35" y="128" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#334155">Embedding Workflow</text>

  <!-- Index Time -->
  <rect x="40" y="145" width="640" height="80" rx="6" fill="#dcfce7" stroke="#16a34a" stroke-width="1.5"/>
  <text x="55" y="165" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#166534">Index Time (once per item)</text>

  <rect x="55" y="178" width="100" height="38" rx="4" fill="#fff" stroke="#666"/>
  <text x="105" y="193" font-family="system-ui, sans-serif" font-size="11" text-anchor="middle">Raw Data</text>
  <text x="105" y="206" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#666">text, images...</text>

  <line x1="155" y1="197" x2="185" y2="197" stroke="#444" stroke-width="1.5" marker-end="url(#arrow)"/>

  <rect x="187" y="178" width="100" height="38" rx="4" fill="#fff" stroke="#666"/>
  <text x="237" y="193" font-family="system-ui, sans-serif" font-size="11" text-anchor="middle">Encoder</text>
  <text x="237" y="206" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#666">BERT, CLIP...</text>

  <line x1="287" y1="197" x2="317" y2="197" stroke="#444" stroke-width="1.5" marker-end="url(#arrow)"/>

  <rect x="319" y="178" width="100" height="38" rx="4" fill="#fff" stroke="#666"/>
  <text x="369" y="201" font-family="system-ui, sans-serif" font-size="11" text-anchor="middle">Vectors</text>

  <!-- Arrow from Vectors down to DB -->
  <line x1="369" y1="216" x2="369" y2="248" stroke="#444" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Document Store (right side) -->
  <rect x="520" y="250" width="140" height="50" rx="6" fill="#fef3c7" stroke="#d97706" stroke-width="1.5"/>
  <text x="590" y="272" font-family="system-ui, sans-serif" font-size="11" text-anchor="middle" font-weight="500">Document Store</text>
  <text x="590" y="287" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#666">original content</text>

  <!-- Arrow from Raw Data to Document Store -->
  <line x1="105" y1="216" x2="105" y2="275" stroke="#444" stroke-width="1.5" stroke-dasharray="4,3"/>
  <line x1="105" y1="275" x2="518" y2="275" stroke="#444" stroke-width="1.5" stroke-dasharray="4,3" marker-end="url(#arrow)"/>

  <!-- Vector Database (center, between boxes) -->
  <rect x="289" y="250" width="160" height="50" rx="25" fill="#fff" stroke="#444" stroke-width="2"/>
  <text x="369" y="272" font-family="system-ui, sans-serif" font-size="11" text-anchor="middle" font-weight="500">Vector Database</text>
  <text x="369" y="287" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#666">vectors + IDs</text>

  <!-- Arrow from DB down to Query Time -->
  <line x1="369" y1="300" x2="369" y2="332" stroke="#444" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Query Time -->
  <rect x="40" y="320" width="640" height="170" rx="6" fill="#dbeafe" stroke="#2563eb" stroke-width="1.5"/>
  <text x="55" y="340" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#1e40af">Query Time (per request)</text>

  <rect x="55" y="358" width="80" height="38" rx="4" fill="#fff" stroke="#666"/>
  <text x="95" y="381" font-family="system-ui, sans-serif" font-size="11" text-anchor="middle">Query</text>

  <line x1="135" y1="377" x2="165" y2="377" stroke="#444" stroke-width="1.5" marker-end="url(#arrow)"/>

  <rect x="167" y="358" width="100" height="38" rx="4" fill="#fff" stroke="#666"/>
  <text x="217" y="373" font-family="system-ui, sans-serif" font-size="11" text-anchor="middle">Encoder</text>
  <text x="217" y="386" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#666">(same model)</text>

  <line x1="267" y1="377" x2="297" y2="377" stroke="#444" stroke-width="1.5" marker-end="url(#arrow)"/>

  <rect x="299" y="358" width="100" height="38" rx="4" fill="#fff" stroke="#666"/>
  <text x="349" y="381" font-family="system-ui, sans-serif" font-size="11" text-anchor="middle">Query Vector</text>

  <line x1="399" y1="377" x2="429" y2="377" stroke="#444" stroke-width="1.5" marker-end="url(#arrow)"/>

  <rect x="431" y="358" width="100" height="38" rx="4" fill="#fff" stroke="#666"/>
  <text x="481" y="373" font-family="system-ui, sans-serif" font-size="11" text-anchor="middle">ANN Search</text>
  <text x="481" y="386" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#666">&lt;1ms</text>

  <line x1="531" y1="377" x2="548" y2="377" stroke="#444" stroke-width="1.5" marker-end="url(#arrow)"/>

  <rect x="550" y="358" width="115" height="38" rx="4" fill="#fff" stroke="#666"/>
  <text x="607" y="373" font-family="system-ui, sans-serif" font-size="11" text-anchor="middle">Top-K IDs</text>
  <text x="607" y="386" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#666">+ similarity scores</text>

  <!-- Arrow from Top-K IDs to Document Store lookup -->
  <line x1="607" y1="396" x2="607" y2="425" stroke="#444" stroke-width="1.5"/>
  <line x1="607" y1="425" x2="607" y2="455" stroke="#444" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Final Results -->
  <rect x="550" y="425" width="115" height="50" rx="4" fill="#fff" stroke="#666"/>
  <text x="607" y="445" font-family="system-ui, sans-serif" font-size="11" text-anchor="middle">Original Content</text>
  <text x="607" y="460" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#666">fetched by ID</text>

  <!-- Arrow from DB to ANN Search -->
  <line x1="420" y1="275" x2="481" y2="275" stroke="#444" stroke-width="1.5"/>
  <line x1="481" y1="275" x2="481" y2="356" stroke="#444" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Arrow from Document Store down to Original Content -->
  <line x1="590" y1="300" x2="590" y2="310" stroke="#444" stroke-width="1.5"/>
  <line x1="590" y1="310" x2="540" y2="310" stroke="#444" stroke-width="1.5"/>
  <line x1="540" y1="310" x2="540" y2="450" stroke="#444" stroke-width="1.5"/>
  <line x1="540" y1="450" x2="548" y2="450" stroke="#444" stroke-width="1.5" marker-end="url(#arrow)"/>
</svg>
